"""
BIM 품질 지표 설정
"""

class BIMQualityConfig:
    """BIM 품질 지표 기준값"""
    
    # BIM OFF (전통 방식)
    BIM_OFF = {
        'warning_density': 0.0,   # 경고밀도 (BIM 미사용)
        'clash_density': 0.0,     # 충돌밀도
        'attribute_fill': 0.0,    # 속성 채움률
        'phase_link': 0.0         # Phase 연결률
    }
    
    # BIM ON - 우수 수준
    BIM_EXCELLENT = {
        'warning_density': 0.3,   # 100㎡당 0.3건
        'clash_density': 0.1,     # 100㎡당 0.1건
        'attribute_fill': 0.98,   # 98%
        'phase_link': 0.95        # 95%
    }
    
    # BIM ON - 양호 수준
    BIM_GOOD = {
        'warning_density': 0.5,
        'clash_density': 0.2,
        'attribute_fill': 0.95,
        'phase_link': 0.90
    }
    
    # BIM ON - 보통 수준
    BIM_AVERAGE = {
        'warning_density': 0.8,
        'clash_density': 0.4,
        'attribute_fill': 0.85,
        'phase_link': 0.75
    }
    
    # BIM ON - 미흡 수준
    BIM_POOR = {
        'warning_density': 1.5,
        'clash_density': 0.7,
        'attribute_fill': 0.70,
        'phase_link': 0.60
    }
    
    # 이슈별 핵심 BIM 지표 가중치
    ISSUE_METRIC_WEIGHTS = {
        # 설계 단계
        'I-01': {'CD': 0.7, 'WD': 0.2, 'AF': 0.1, 'PL': 0.0},  # 설비-구조 간섭
        'I-02': {'WD': 0.6, 'CD': 0.2, 'AF': 0.1, 'PL': 0.1},  # 도면 간 불일치
        'I-03': {'AF': 0.5, 'WD': 0.3, 'CD': 0.1, 'PL': 0.1},  # 물량산출 오류
        'I-04': {'WD': 0.5, 'AF': 0.3, 'CD': 0.1, 'PL': 0.1},  # 설계 변경 이력
        'I-05': {'WD': 0.5, 'AF': 0.3, 'CD': 0.1, 'PL': 0.1},  # 단면도-평면도 불일치
        
        # 시공 단계
        'I-06': {'AF': 0.6, 'WD': 0.2, 'CD': 0.1, 'PL': 0.1},  # RFI 폭증
        'I-07': {'WD': 0.5, 'AF': 0.3, 'CD': 0.2, 'PL': 0.0},  # 철골 제작 오류
        'I-08': {'WD': 0.4, 'AF': 0.3, 'CD': 0.2, 'PL': 0.1},  # 현장 착오 시공
        'I-09': {'CD': 0.7, 'WD': 0.2, 'AF': 0.1, 'PL': 0.0},  # 배관 간섭
        'I-10': {'PL': 0.6, 'CD': 0.3, 'AF': 0.1, 'WD': 0.0},  # 양중 계획
        'I-11': {'CD': 0.0, 'WD': 0.0, 'AF': 0.0, 'PL': 0.0},  # 우기 장마 (BIM 무관)
        'I-12': {'WD': 0.5, 'AF': 0.3, 'CD': 0.1, 'PL': 0.1},  # 층간 높이 오차
        'I-13': {'AF': 0.6, 'WD': 0.2, 'CD': 0.1, 'PL': 0.1},  # 자재 발주 오류
        'I-14': {'CD': 0.0, 'WD': 0.0, 'AF': 0.0, 'PL': 0.0},  # 인력 수급 (BIM 무관)
        'I-15': {'CD': 0.5, 'AF': 0.3, 'WD': 0.1, 'PL': 0.1},  # 지하 매설물
        'I-16': {'WD': 0.3, 'AF': 0.3, 'CD': 0.2, 'PL': 0.2},  # 콘크리트 양생
        'I-17': {'CD': 0.0, 'WD': 0.0, 'AF': 0.0, 'PL': 0.0},  # 타워크레인 고장
        
        # 발주/계약 단계
        'I-18': {'PL': 0.5, 'AF': 0.3, 'WD': 0.1, 'CD': 0.1},  # 발주자 설계 변경
        'I-19': {'AF': 0.6, 'WD': 0.2, 'CD': 0.1, 'PL': 0.1},  # 계약 금액 오류
        'I-20': {'AF': 0.5, 'WD': 0.3, 'CD': 0.1, 'PL': 0.1},  # 인허가 서류
        'I-21': {'CD': 0.0, 'WD': 0.0, 'AF': 0.0, 'PL': 0.0},  # 하도급 부도
        
        # 자재/공급 단계
        'I-22': {'PL': 0.4, 'AF': 0.3, 'WD': 0.2, 'CD': 0.1},  # 수입 자재 지연
        'I-23': {'CD': 0.0, 'WD': 0.0, 'AF': 0.0, 'PL': 0.0},  # 철근 가격 급등
        'I-24': {'AF': 0.5, 'WD': 0.3, 'CD': 0.1, 'PL': 0.1},  # 맞춤 제작 지연
        'I-25': {'AF': 0.4, 'WD': 0.3, 'CD': 0.2, 'PL': 0.1},  # 자재 품질 불량
        
        # 감리/행정 단계
        'I-26': {'WD': 0.4, 'AF': 0.3, 'CD': 0.2, 'PL': 0.1},  # 감리 지적
        'I-27': {'AF': 0.4, 'WD': 0.3, 'CD': 0.2, 'PL': 0.1},  # 준공 검사 불합격
    }
    
    # 기본 가중치 (이슈별 정의 없을 경우)
    DEFAULT_WEIGHTS = {'CD': 0.3, 'WD': 0.25, 'AF': 0.25, 'PL': 0.2}
    
    # Sigmoid 함수 파라미터
    SIGMOID_K = 10      # 기울기
    SIGMOID_X0 = 0.5    # 변곡점
    
    # 최대 탐지 확률
    MAX_DETECTION_PROB = 0.98